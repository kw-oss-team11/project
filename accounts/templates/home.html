<!DOCTYPE html>
<html>
<head>
    <title>Home</title>
    <style>
        /* 전체 페이지 스타일링 */
        body {
            font-family: Arial, sans-serif;
        }

        /* 상단 바 스타일링 */
        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid #ccc;
        }

        /* 지도 컨테이너 스타일링 */
        #map-container {
            display: flex;
        }

        /* 지도 스타일링 */
        #map {
            height: 400px;
            width: 70%;
            margin: 20px;
            border: 1px solid #ccc;
        }

        /* 버튼 컨테이너 스타일링 */
        .buttons-container {
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            margin: 20px;
        }

        /* 각 버튼 스타일링 */
        .buttons-container button {
            margin-bottom: 10px;
            padding: 10px;
            width: 150px;
        }

    </style>
</head>
<body>

<div class="top-bar">
    <h1>Welcome Home!</h1>
    <h2>{{ user.username }}</h2>
</div>

<div id="map-container">
    <div id="map">Google Map</div>
    <div class="buttons-container">
        <a href="{% url 'chat:room_list' %}">
            <button>Chat</button>
        </a>
        <button onclick="window.location.href='/hello.html'">Hello</button>
        <button onclick="window.location.href='/bye.html'">Bye</button>
    </div>
</div>


<!-- Google Maps JavaScript API 로드 -->
<script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDCXL8SSd3vNXe_kn-LW9mKIFFIjfMC1KQ&callback=initMap">
</script>

<script>
    // Google 지도 초기화 함수
    function initMap() {
        var mapDiv = document.getElementById('map');
        var map = new google.maps.Map(mapDiv, {
            center: { lat: 37.62, lng: 127.0582 }, // 기본 중심 위치 (San Francisco)
            zoom: 17
        });
        // 현재 위치 표시를 위한 마커
        var myLocationMarker = new google.maps.Marker({
            map: map,
            title: '내 위치',
            icon: 'http://maps.google.com/mapfiles/ms/icons/blue-dot.png'
        });
        // Geolocation API를 이용하여 현재 위치를 가져옵니다.
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function (position) {
                var myLocation = {
                    lat: position.coords.latitude,
                    lng: position.coords.longitude
                };
                myLocationMarker.setPosition(myLocation);
                map.setCenter(myLocation);
            });
        }
        // 편의점 위치 정보
        var convenienceStores = [
            { name: 'GS25', location: { lat: 37.6198, lng: 127.058 }, url:'/gs25', icon:'/static/GS25.jpeg' },
            { name: '세븐일레븐', location: { lat: 37.62, lng: 127.0586 }, url:'/seven', icon:'/static/SEVEN.jpeg' },
            { name: 'CU', location: { lat: 37.6208, lng: 127.0571 }, url:'/cu', icon:'/static/CU.png' },
            { name: 'GS25', location: { lat: 37.6194, lng: 127.0574 }, url:'/gs25', icon:'/static/GS25.jpeg' }
            // 추가적인 편의점 정보를 필요에 따라 계속해서 추가
    ]
    convenienceStores.forEach(function(store) {
        var marker = new google.maps.Marker({
            map: map,
            position: store.location,
            title: store.name,
            icon : {
                url: store.icon,
                // This size is for the marker's clickable area. You can set it to any value.
        size: new google.maps.Size(40, 40),
        // The point on the image to align with the marker's location.
        origin: new google.maps.Point(0, 0),
        // The point on the image that will be placed at the marker's location.
        anchor: new google.maps.Point(20, 20),
        // This size is used to scale the image
        scaledSize: new google.maps.Size(40, 40)  // The size you want the image to display
            }
        });

        // 마커 클릭 시 해당 편의점 URL로 이동
        marker.addListener('click', function() {
            window.location.href = store.url;
        });
    });

    }
</script>

</body>
</html>
